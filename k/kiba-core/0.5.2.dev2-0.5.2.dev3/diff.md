# Comparing `tmp/kiba_core-0.5.2.dev2-py3-none-any.whl.zip` & `tmp/kiba_core-0.5.2.dev3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,46 +1,48 @@
-Zip file size: 34670 bytes, number of entries: 44
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 13:01 core/__init__.py
--rw-r--r--  2.0 unx     4565 b- defN 23-Apr-12 13:01 core/aws_requester.py
--rw-r--r--  2.0 unx     9258 b- defN 23-Apr-12 13:01 core/exceptions.py
--rw-r--r--  2.0 unx     9902 b- defN 23-Apr-12 13:01 core/logging.py
--rw-r--r--  2.0 unx      103 b- defN 23-Apr-12 13:01 core/py.typed
--rw-r--r--  2.0 unx     7461 b- defN 23-Apr-12 13:01 core/requester.py
--rw-r--r--  2.0 unx    11518 b- defN 23-Apr-12 13:01 core/s3_manager.py
--rw-r--r--  2.0 unx      728 b- defN 23-Apr-12 13:01 core/service_client.py
--rw-r--r--  2.0 unx      859 b- defN 23-Apr-12 13:01 core/slack_client.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 13:01 core/api/__init__.py
--rw-r--r--  2.0 unx      315 b- defN 23-Apr-12 13:01 core/api/health.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 13:01 core/api/middleware/__init__.py
--rw-r--r--  2.0 unx      827 b- defN 23-Apr-12 13:01 core/api/middleware/database_connection_middleware.py
--rw-r--r--  2.0 unx     1975 b- defN 23-Apr-12 13:01 core/api/middleware/exception_handling_middleware.py
--rw-r--r--  2.0 unx     1404 b- defN 23-Apr-12 13:01 core/api/middleware/logging_middleware.py
--rw-r--r--  2.0 unx     1014 b- defN 23-Apr-12 13:01 core/api/middleware/server_headers_middleware.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 13:01 core/http/__init__.py
--rw-r--r--  2.0 unx     1005 b- defN 23-Apr-12 13:01 core/http/basic_authentication.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 13:01 core/queues/__init__.py
--rw-r--r--  2.0 unx     4107 b- defN 23-Apr-12 13:01 core/queues/aqs.py
--rw-r--r--  2.0 unx     1350 b- defN 23-Apr-12 13:01 core/queues/message_queue.py
--rw-r--r--  2.0 unx     5313 b- defN 23-Apr-12 13:01 core/queues/message_queue_processor.py
--rw-r--r--  2.0 unx     1018 b- defN 23-Apr-12 13:01 core/queues/model.py
--rw-r--r--  2.0 unx     4915 b- defN 23-Apr-12 13:01 core/queues/sqs.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 13:01 core/store/__init__.py
--rw-r--r--  2.0 unx     3588 b- defN 23-Apr-12 13:01 core/store/database.py
--rw-r--r--  2.0 unx     8499 b- defN 23-Apr-12 13:01 core/store/retriever.py
--rw-r--r--  2.0 unx     3056 b- defN 23-Apr-12 13:01 core/store/saver.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 13:01 core/util/__init__.py
--rw-r--r--  2.0 unx      410 b- defN 23-Apr-12 13:01 core/util/chain_util.py
--rw-r--r--  2.0 unx     3949 b- defN 23-Apr-12 13:01 core/util/date_util.py
--rw-r--r--  2.0 unx      484 b- defN 23-Apr-12 13:01 core/util/dict_util.py
--rw-r--r--  2.0 unx     2442 b- defN 23-Apr-12 13:01 core/util/file_util.py
--rw-r--r--  2.0 unx      258 b- defN 23-Apr-12 13:01 core/util/hashing_util.py
--rw-r--r--  2.0 unx      350 b- defN 23-Apr-12 13:01 core/util/list_util.py
--rw-r--r--  2.0 unx      293 b- defN 23-Apr-12 13:01 core/util/string_util.py
--rw-r--r--  2.0 unx     1072 b- defN 23-Apr-12 13:01 core/util/typing_util.py
--rw-r--r--  2.0 unx     1906 b- defN 23-Apr-12 13:01 core/util/value_holder.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 13:01 core/web3/__init__.py
--rw-r--r--  2.0 unx    11797 b- defN 23-Apr-12 13:01 core/web3/eth_client.py
--rw-r--r--  2.0 unx     1189 b- defN 23-Apr-12 13:02 kiba_core-0.5.2.dev2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-12 13:02 kiba_core-0.5.2.dev2.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Apr-12 13:02 kiba_core-0.5.2.dev2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3555 b- defN 23-Apr-12 13:02 kiba_core-0.5.2.dev2.dist-info/RECORD
-44 files, 110582 bytes uncompressed, 29028 bytes compressed:  73.7%
+Zip file size: 35486 bytes, number of entries: 46
+-rw-r--r--  2.0 unx        0 b- defN 23-May-10 15:01 core/__init__.py
+-rw-r--r--  2.0 unx     4565 b- defN 23-May-10 15:01 core/aws_requester.py
+-rw-r--r--  2.0 unx      559 b- defN 23-May-10 15:01 core/discord_client.py
+-rw-r--r--  2.0 unx     9258 b- defN 23-May-10 15:01 core/exceptions.py
+-rw-r--r--  2.0 unx     9902 b- defN 23-May-10 15:01 core/logging.py
+-rw-r--r--  2.0 unx      202 b- defN 23-May-10 15:01 core/notification_client.py
+-rw-r--r--  2.0 unx      103 b- defN 23-May-10 15:01 core/py.typed
+-rw-r--r--  2.0 unx     7461 b- defN 23-May-10 15:01 core/requester.py
+-rw-r--r--  2.0 unx    11518 b- defN 23-May-10 15:01 core/s3_manager.py
+-rw-r--r--  2.0 unx      728 b- defN 23-May-10 15:01 core/service_client.py
+-rw-r--r--  2.0 unx      948 b- defN 23-May-10 15:01 core/slack_client.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-10 15:01 core/api/__init__.py
+-rw-r--r--  2.0 unx      315 b- defN 23-May-10 15:01 core/api/health.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-10 15:01 core/api/middleware/__init__.py
+-rw-r--r--  2.0 unx      827 b- defN 23-May-10 15:01 core/api/middleware/database_connection_middleware.py
+-rw-r--r--  2.0 unx     1975 b- defN 23-May-10 15:01 core/api/middleware/exception_handling_middleware.py
+-rw-r--r--  2.0 unx     1404 b- defN 23-May-10 15:01 core/api/middleware/logging_middleware.py
+-rw-r--r--  2.0 unx     1014 b- defN 23-May-10 15:01 core/api/middleware/server_headers_middleware.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-10 15:01 core/http/__init__.py
+-rw-r--r--  2.0 unx     1005 b- defN 23-May-10 15:01 core/http/basic_authentication.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-10 15:01 core/queues/__init__.py
+-rw-r--r--  2.0 unx     4107 b- defN 23-May-10 15:01 core/queues/aqs.py
+-rw-r--r--  2.0 unx     1350 b- defN 23-May-10 15:01 core/queues/message_queue.py
+-rw-r--r--  2.0 unx     5433 b- defN 23-May-10 15:01 core/queues/message_queue_processor.py
+-rw-r--r--  2.0 unx     1018 b- defN 23-May-10 15:01 core/queues/model.py
+-rw-r--r--  2.0 unx     4915 b- defN 23-May-10 15:01 core/queues/sqs.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-10 15:01 core/store/__init__.py
+-rw-r--r--  2.0 unx     3588 b- defN 23-May-10 15:01 core/store/database.py
+-rw-r--r--  2.0 unx     8499 b- defN 23-May-10 15:01 core/store/retriever.py
+-rw-r--r--  2.0 unx     3056 b- defN 23-May-10 15:01 core/store/saver.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-10 15:01 core/util/__init__.py
+-rw-r--r--  2.0 unx      410 b- defN 23-May-10 15:01 core/util/chain_util.py
+-rw-r--r--  2.0 unx     3949 b- defN 23-May-10 15:01 core/util/date_util.py
+-rw-r--r--  2.0 unx      484 b- defN 23-May-10 15:01 core/util/dict_util.py
+-rw-r--r--  2.0 unx     2442 b- defN 23-May-10 15:01 core/util/file_util.py
+-rw-r--r--  2.0 unx      258 b- defN 23-May-10 15:01 core/util/hashing_util.py
+-rw-r--r--  2.0 unx      350 b- defN 23-May-10 15:01 core/util/list_util.py
+-rw-r--r--  2.0 unx      293 b- defN 23-May-10 15:01 core/util/string_util.py
+-rw-r--r--  2.0 unx     1072 b- defN 23-May-10 15:01 core/util/typing_util.py
+-rw-r--r--  2.0 unx     1906 b- defN 23-May-10 15:01 core/util/value_holder.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-10 15:01 core/web3/__init__.py
+-rw-r--r--  2.0 unx    11797 b- defN 23-May-10 15:01 core/web3/eth_client.py
+-rw-r--r--  2.0 unx     1189 b- defN 23-May-10 15:02 kiba_core-0.5.2.dev3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-10 15:02 kiba_core-0.5.2.dev3.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-10 15:02 kiba_core-0.5.2.dev3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3716 b- defN 23-May-10 15:02 kiba_core-0.5.2.dev3.dist-info/RECORD
+46 files, 111713 bytes uncompressed, 29594 bytes compressed:  73.5%
```

## zipnote {}

```diff
@@ -1,19 +1,25 @@
 Filename: core/__init__.py
 Comment: 
 
 Filename: core/aws_requester.py
 Comment: 
 
+Filename: core/discord_client.py
+Comment: 
+
 Filename: core/exceptions.py
 Comment: 
 
 Filename: core/logging.py
 Comment: 
 
+Filename: core/notification_client.py
+Comment: 
+
 Filename: core/py.typed
 Comment: 
 
 Filename: core/requester.py
 Comment: 
 
 Filename: core/s3_manager.py
@@ -114,20 +120,20 @@
 
 Filename: core/web3/__init__.py
 Comment: 
 
 Filename: core/web3/eth_client.py
 Comment: 
 
-Filename: kiba_core-0.5.2.dev2.dist-info/METADATA
+Filename: kiba_core-0.5.2.dev3.dist-info/METADATA
 Comment: 
 
-Filename: kiba_core-0.5.2.dev2.dist-info/WHEEL
+Filename: kiba_core-0.5.2.dev3.dist-info/WHEEL
 Comment: 
 
-Filename: kiba_core-0.5.2.dev2.dist-info/top_level.txt
+Filename: kiba_core-0.5.2.dev3.dist-info/top_level.txt
 Comment: 
 
-Filename: kiba_core-0.5.2.dev2.dist-info/RECORD
+Filename: kiba_core-0.5.2.dev3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## core/slack_client.py

```diff
@@ -1,23 +1,23 @@
 from typing import Optional
 
 from core.requester import KibaResponse
 from core.requester import Requester
+from core.notification_client import NotificationClient
 
-
-class SlackClient:
+class SlackClient(NotificationClient):
 
     def __init__(self, webhookUrl: str, requester: Requester, defaultChannel: str, defaultSender: Optional[str] = 'kiba-server', defaultIconEmoji: Optional[str] = ':robot_face:') -> None:
         self.webhookUrl = webhookUrl
         self.requester = requester
         self.defaultChannel = defaultChannel
         self.defaultSender = defaultSender
         self.defaultIconEmoji = defaultIconEmoji
 
-    async def post(self, text: str) -> KibaResponse:
+    async def post(self, messageText: str) -> KibaResponse:
         response = await self.requester.post_json(url=self.webhookUrl, dataDict={
-            'text': text,
+            'text': messageText,
             'username': self.defaultSender,
             'channel': self.defaultChannel,
             'icon_emoji': self.defaultIconEmoji,
         })
         return response
```

## core/queues/message_queue_processor.py

```diff
@@ -1,24 +1,26 @@
 import abc
 import asyncio
 import time
 import urllib.parse as urlparse
 import uuid
 from abc import ABC
 from typing import Generic
+from typing import List
 from typing import Optional
 from typing import TypeVar
 
 from core import logging
 from core.exceptions import InternalServerErrorException
 from core.exceptions import KibaException
 from core.queues.message_queue import MessageQueue
 from core.queues.model import Message
-from core.slack_client import SlackClient
+# from core.slack_client import SlackClient
 from core.util.value_holder import RequestIdHolder
+from core.notification_client import NotificationClient
 
 
 class MessageProcessor(ABC):
 
     @abc.abstractmethod
     async def process_message(self, message: Message) -> None:
         pass
@@ -33,18 +35,18 @@
         self.originalException = originalException
 
 
 MessageType = TypeVar('MessageType', bound=Message)  # pylint: disable=invalid-name
 
 class MessageQueueProcessor(Generic[MessageType]):
 
-    def __init__(self, queue: MessageQueue[MessageType], messageProcessor: MessageProcessor, slackClient: Optional[SlackClient] = None, requestIdHolder: Optional[RequestIdHolder] = None):
+    def __init__(self, queue: MessageQueue[MessageType], messageProcessor: MessageProcessor, notificationClients: List[NotificationClient], requestIdHolder: Optional[RequestIdHolder] = None):
         self.queue = queue
         self.messageProcessor = messageProcessor
-        self.slackClient = slackClient
+        self.notificationClients = notificationClients
         self.requestIdHolder = requestIdHolder
 
     async def _process_message(self, message: MessageType) -> None:
         requestId = message.requestId or str(uuid.uuid4()).replace('-', '')
         if self.requestIdHolder:
             self.requestIdHolder.set_value(value=requestId)
         query = urlparse.urlencode(message.content, doseq=True)
@@ -57,16 +59,16 @@
         except MessageNeedsReprocessingException as exception:
             logging.info(msg=f'Scheduling reprocessing for message:{message.command} due to: {str(exception.originalException)}')
             await self.queue.send_message(message=message, delaySeconds=((message.postCount or 0) * exception.delaySeconds))  # pylint: disable=superfluous-parens
         except Exception as exception:  # pylint: disable=broad-except
             statusCode = exception.statusCode if isinstance(exception, KibaException) else 500
             logging.error('Caught exception whilst processing message')
             logging.exception(exception)
-            if self.slackClient:
-                await self.slackClient.post(text=f'Error processing message: {message.command}\n```{requestId}\n{message.content}\n{exception}```')
+            for client in self.notificationClients:
+                await client.post(messageText=f'Error processing message: {message.command}\n```\n{requestId}\n{message.content}\n{exception}```')
             # TODO(krish): should possibly reset the visibility timeout
         duration = time.time() - startTime
         logging.api(action='MESSAGE', path=message.command, query=query, response=statusCode, duration=duration)
         if self.requestIdHolder:
             self.requestIdHolder.set_value(value=None)
 
     async def execute_batch(self, batchSize: int, expectedProcessingSeconds: int = 300, longPollSeconds: int = 20, shouldProcessInParallel: bool = False) -> int:
```

## Comparing `kiba_core-0.5.2.dev2.dist-info/METADATA` & `kiba_core-0.5.2.dev3.dist-info/METADATA`

 * *Files 8% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kiba-core
-Version: 0.5.2.dev2
+Version: 0.5.2.dev3
 Summary: Kiba Labs' python utilities
 Home-page: https://github.com/kibalabs/core-py
 Requires-Python: ~=3.7
 Requires-Dist: aiofiles (~=23.1.0)
 Requires-Dist: pydantic (~=1.10.1)
 Provides-Extra: api
 Requires-Dist: fastapi (~=0.92.0) ; extra == 'api'
```

## Comparing `kiba_core-0.5.2.dev2.dist-info/RECORD` & `kiba_core-0.5.2.dev3.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,29 +1,31 @@
 core/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 core/aws_requester.py,sha256=KWCxdr1LzvAgj_mq3_B6u9HR3Qi4kC_XCbMkOYJzd4g,4565
+core/discord_client.py,sha256=si7DKqObta-0jkD_fjJWELBROc_bExbDLAryidKsghA,559
 core/exceptions.py,sha256=-0kfA8hnBd941o8MOi-e2RlN9uY9HomVGAIurXSMlqg,9258
 core/logging.py,sha256=KIrj0gRgR1FGL9DtYYiB3RXCaBMwEGSA1FzRqCBGyk8,9902
+core/notification_client.py,sha256=r-bbm1VOpWPDkFxQoXQwC35BI6ByT7dRHEJAEzYYLCM,202
 core/py.typed,sha256=_HF29EHUSw7dsoMNaKG2kJ_eEs04u8HCPk-OwjwB9gs,103
 core/requester.py,sha256=lpy75cSo6NSQbFTiBKpqu-Bq_kf5EFxYt4Sj0mQ7bI4,7461
 core/s3_manager.py,sha256=SMO65cGTXlN35naQEii5jjKfFwdyGMTQphmC5IH1nOY,11518
 core/service_client.py,sha256=UxAGuo6CCvS8HKqSAmIMKogRlia2zL_XPr2BO-VBV0w,728
-core/slack_client.py,sha256=a9nxGcFfOWi-snl3k981OXMQ4qzUI3SS5bqsh2klrJo,859
+core/slack_client.py,sha256=MJH4OwMxV7YLtHZBMIqEhG9DfEJmIpJK_5j-dzFwSJY,948
 core/api/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 core/api/health.py,sha256=GkW8piogElhWUL1fNGqtM4M38WtD1FzZNoam6SknnlQ,315
 core/api/middleware/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 core/api/middleware/database_connection_middleware.py,sha256=fWEGZvGBxYB9YrrqMomYUFyF6Qj_cwOpFb2Sb1fdrr4,827
 core/api/middleware/exception_handling_middleware.py,sha256=l1_udEmuwMnszC-DFgu9eHrvAPvvn8PNrFfORH7P4OQ,1975
 core/api/middleware/logging_middleware.py,sha256=gJ52i3RXlJ8C369xMjHyoizpLElgxa16tM1vTefyEVM,1404
 core/api/middleware/server_headers_middleware.py,sha256=Ppi2GdIkhcb0WGmThFsfm2KltuEZS0IfFbfQwuNxctQ,1014
 core/http/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 core/http/basic_authentication.py,sha256=IopMygf6Sp882ILyzeEB6PVVuoaQkaGmYYIB-rV06XY,1005
 core/queues/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 core/queues/aqs.py,sha256=wIWHGmKzgvCauIPqYgUGTEeXufLOso-YqOS2nEDvZKg,4107
 core/queues/message_queue.py,sha256=nb4_zkJHMAYgHoFtySNpbwmQvMDIvMf2d6TrIwjicN8,1350
-core/queues/message_queue_processor.py,sha256=xq0KInzXFxybKZTPvODIjR_ja6Z0KovP8S8dle5ucqI,5313
+core/queues/message_queue_processor.py,sha256=3ABIGQsJ6n0QsYUUxY5vVutjIya6evt4ZedQmxizZAk,5433
 core/queues/model.py,sha256=ZUEvSn4Z_ADCecBt7aIRaNmHGZp97UYrMUhuWveUi6E,1018
 core/queues/sqs.py,sha256=eN3DkIvqDyQtV6VC7rm5mqjs1e84CKi-Re_DiulPDRg,4915
 core/store/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 core/store/database.py,sha256=Hc-cJgw6FzRWR1Odirv5i9GwjX7CbD1VEHzlIgwRsDM,3588
 core/store/retriever.py,sha256=e-FJhekKWvMSzisWn0x27D5pKGLwaDY3DzaWZWActEg,8499
 core/store/saver.py,sha256=-uBIRXsMRye5Y4-1sN-JS7WR9i5b7fajEzgLXiqO608,3056
 core/util/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
@@ -34,11 +36,11 @@
 core/util/hashing_util.py,sha256=caUQl1Oycnbcy1XdlDvePqjN-vAMyxWRXgY-cN-mbKw,258
 core/util/list_util.py,sha256=CJn-x9MgUvOOh_r9mcuWTrmrDTNvUNhCEnISUYiV_kM,350
 core/util/string_util.py,sha256=6I52LsfnooVS3hpD-jL2bFpMBqqs_jyuljXjOYyZEv0,293
 core/util/typing_util.py,sha256=5PSe8KJeuOhX7LWV8Uut6x-Zq6rQyQ6INFY5XSAPSjs,1072
 core/util/value_holder.py,sha256=Za-Fmaso6EUlM2zamKha9AN-meX5nM9sWkAET5AzzFw,1906
 core/web3/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 core/web3/eth_client.py,sha256=t5UGoXUDt1XSBwjmtW66mUlGzlqZYdq9EBhit9uIDvw,11797
-kiba_core-0.5.2.dev2.dist-info/METADATA,sha256=kENIqTSt7c1TGiVWVOTWBadSTsU57uV25fSno9NdxiE,1189
-kiba_core-0.5.2.dev2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-kiba_core-0.5.2.dev2.dist-info/top_level.txt,sha256=0ebp8k35dOTHVwbY3UcokRsjC7cWLN_iaJ70tIcmODU,5
-kiba_core-0.5.2.dev2.dist-info/RECORD,,
+kiba_core-0.5.2.dev3.dist-info/METADATA,sha256=pfLzqHRNN-2Vuhk6E1IQrwR8Nu3VaMydqU8lEweuOlQ,1189
+kiba_core-0.5.2.dev3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+kiba_core-0.5.2.dev3.dist-info/top_level.txt,sha256=0ebp8k35dOTHVwbY3UcokRsjC7cWLN_iaJ70tIcmODU,5
+kiba_core-0.5.2.dev3.dist-info/RECORD,,
```

