# Comparing `tmp/odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1-py3-none-any.whl.zip` & `tmp/odoo13_addon_delivery_multi_destination-13.0.1.1.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,33 +1,33 @@
-Zip file size: 40848 bytes, number of entries: 31
--rw-r--r--  2.0 unx     3953 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/README.rst
--rw-r--r--  2.0 unx       87 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/__init__.py
--rw-r--r--  2.0 unx      603 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/__manifest__.py
--rw-r--r--  2.0 unx     3717 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/demo/delivery_carrier_demo.xml
--rw-r--r--  2.0 unx     6127 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/cs_CZ.po
--rw-r--r--  2.0 unx     5931 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/de.po
--rw-r--r--  2.0 unx     4577 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/delivery_multi_destination.pot
--rw-r--r--  2.0 unx     6168 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/es.po
--rw-r--r--  2.0 unx     5822 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/fr.po
--rw-r--r--  2.0 unx     5820 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/it.po
--rw-r--r--  2.0 unx     5820 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/nl.po
--rw-r--r--  2.0 unx     5829 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/nl_NL.po
--rw-r--r--  2.0 unx     6185 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/pt_BR.po
--rw-r--r--  2.0 unx     5906 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/sl.po
--rw-r--r--  2.0 unx     5839 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/i18n/zh_CN.po
--rw-r--r--  2.0 unx       97 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/models/__init__.py
--rw-r--r--  2.0 unx     4207 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/models/delivery_carrier.py
--rw-r--r--  2.0 unx      386 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      101 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      383 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      129 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      153 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/static/description/icon.png
--rw-r--r--  2.0 unx    13699 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/static/description/index.html
--rw-r--r--  2.0 unx      112 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/tests/__init__.py
--rw-r--r--  2.0 unx     8057 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py
--rw-r--r--  2.0 unx     4578 b- defN 22-Apr-22 03:01 odoo/addons/delivery_multi_destination/views/delivery_carrier_view.xml
--rw-r--r--  2.0 unx     4536 b- defN 22-Apr-22 03:02 odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Apr-22 03:02 odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Apr-22 03:02 odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3547 b- defN 22-Apr-22 03:02 odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/RECORD
-31 files, 121921 bytes uncompressed, 34772 bytes compressed:  71.5%
+Zip file size: 41131 bytes, number of entries: 31
+-rw-r--r--  2.0 unx     3953 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/README.rst
+-rw-r--r--  2.0 unx       87 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/__init__.py
+-rw-r--r--  2.0 unx      603 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/__manifest__.py
+-rw-r--r--  2.0 unx     3717 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/demo/delivery_carrier_demo.xml
+-rw-r--r--  2.0 unx     6127 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/cs_CZ.po
+-rw-r--r--  2.0 unx     5931 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/de.po
+-rw-r--r--  2.0 unx     4577 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/delivery_multi_destination.pot
+-rw-r--r--  2.0 unx     6168 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/es.po
+-rw-r--r--  2.0 unx     5822 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/fr.po
+-rw-r--r--  2.0 unx     5820 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/it.po
+-rw-r--r--  2.0 unx     5820 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/nl.po
+-rw-r--r--  2.0 unx     5829 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/nl_NL.po
+-rw-r--r--  2.0 unx     6185 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/pt_BR.po
+-rw-r--r--  2.0 unx     5906 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/sl.po
+-rw-r--r--  2.0 unx     5839 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/i18n/zh_CN.po
+-rw-r--r--  2.0 unx       97 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/models/__init__.py
+-rw-r--r--  2.0 unx     4964 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/models/delivery_carrier.py
+-rw-r--r--  2.0 unx      386 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      101 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      383 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      129 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      153 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/static/description/icon.png
+-rw-r--r--  2.0 unx    13699 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/static/description/index.html
+-rw-r--r--  2.0 unx      112 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/tests/__init__.py
+-rw-r--r--  2.0 unx     8521 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py
+-rw-r--r--  2.0 unx     4578 b- defN 23-May-10 21:34 odoo/addons/delivery_multi_destination/views/delivery_carrier_view.xml
+-rw-r--r--  2.0 unx     4531 b- defN 23-May-10 21:34 odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-10 21:34 odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-10 21:34 odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3527 b- defN 23-May-10 21:34 odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/RECORD
+31 files, 123117 bytes uncompressed, 35095 bytes compressed:  71.5%
```

## zipnote {}

```diff
@@ -75,20 +75,20 @@
 
 Filename: odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py
 Comment: 
 
 Filename: odoo/addons/delivery_multi_destination/views/delivery_carrier_view.xml
 Comment: 
 
-Filename: odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/METADATA
+Filename: odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/WHEEL
+Filename: odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/top_level.txt
+Filename: odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/RECORD
+Filename: odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/delivery_multi_destination/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2016-2019 Tecnativa - Pedro M. Baeza
 # Copyright 2017 Luis M. Ontalba <luis.martinez@tecnativa.com>
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "Multiple destinations for the same delivery method",
-    "version": "13.0.1.1.0",
+    "version": "13.0.1.1.2",
     "category": "Delivery",
     "website": "https://github.com/OCA/delivery-carrier",
     "author": "Tecnativa, " "Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "installable": True,
     "depends": ["delivery"],
     "demo": ["demo/delivery_carrier_demo.xml"],
```

## odoo/addons/delivery_multi_destination/models/delivery_carrier.py

```diff
@@ -19,14 +19,20 @@
     )
     destination_type = fields.Selection(
         selection=[("one", "One destination"), ("multi", "Multiple destinations")],
         default="one",
         required=True,
     )
 
+    @api.onchange("destination_type", "child_ids")
+    def _onchange_destination_type(self):
+        """Define the corresponding value to avoid creation error with UX."""
+        if self.destination_type == "multi" and self.child_ids and not self.product_id:
+            self.product_id = fields.first(self.child_ids.product_id)
+
     def search(self, args, offset=0, limit=None, order=None, count=False):
         """Don't show by default children carriers."""
         if not self.env.context.get("show_children_carriers"):
             if args is None:
                 args = []
             args += [("parent_id", "=", False)]
         return super(DeliveryCarrier, self).search(
@@ -88,17 +94,24 @@
                                     "exact_price": subcarrier.fixed_price,
                                     "tracking_number": False,
                                 }
                             ]
                             break
                     else:
                         try:
+                            # on base_on_rule_send_shipping, the method
+                            # _get_price_available is called using p.carrier_id,
+                            # ignoring the self arg, so we need to temporarily replace
+                            # it with the subcarrier
+                            p.carrier_id = subcarrier.id
                             picking_res = super(
                                 DeliveryCarrier, subcarrier,
-                            ).send_shipping(pickings)
+                            ).send_shipping(p)
                             break
                         except Exception:
                             pass
+                        finally:
+                            p.carrier_id = carrier
                 if not picking_res:
                     raise ValidationError(_("There is no matching delivery rule."))
                 res += picking_res
             return res
```

## odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py

```diff
@@ -200,7 +200,17 @@
         self.sale_order.carrier_id = self.carrier_multi.id
         self.sale_order.action_confirm()
         picking = self.sale_order.picking_ids
         self.assertEqual(picking.carrier_id, self.carrier_multi)
         picking.move_lines.quantity_done = 1
         picking.action_done()
         self.assertAlmostEqual(picking.carrier_price, 50)
+
+    def test_delivery_carrier_multi_form(self):
+        carrier_form = Form(self.env["delivery.carrier"])
+        carrier_form.name = "Multi carrier"
+        carrier_form.destination_type = "multi"
+        with carrier_form.child_ids.new() as child_form:
+            child_form.name = "Child carrier"
+            child_form.product_id = self.product_child_1
+        carrier = carrier_form.save()
+        self.assertEqual(carrier.product_id, self.product_child_1)
```

## Comparing `odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/METADATA` & `odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo13-addon-delivery-multi-destination
-Version: 13.0.1.1.1.dev1
+Version: 13.0.1.1.2
 Summary: Multiple destinations for the same delivery method
 Home-page: https://github.com/OCA/delivery-carrier
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/RECORD` & `odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,31 +1,31 @@
 odoo/addons/delivery_multi_destination/README.rst,sha256=vqn3LaHUu_u1msFXDZYVqQdVUI3dBLtBmpGhe46cIAw,3953
 odoo/addons/delivery_multi_destination/__init__.py,sha256=eShEGRadAlxopoLqIQ4-N42FM7MWPSuBe0h_l1cXTPM,87
-odoo/addons/delivery_multi_destination/__manifest__.py,sha256=cHQ0vmtLx7L38x0c5OPOJQl8HkOpb5TramJvLHjKVgQ,603
+odoo/addons/delivery_multi_destination/__manifest__.py,sha256=qVcRq53-J4U5so2rbrjAlahML2_5u7FqSC2JNx-9M6E,603
 odoo/addons/delivery_multi_destination/demo/delivery_carrier_demo.xml,sha256=IBOface0JWXR_p-70Gj0siXmbWKP2p8TYciaecCOOG0,3717
 odoo/addons/delivery_multi_destination/i18n/cs_CZ.po,sha256=mCMJ8RJvqw0yfGxAz_w6O32UVpQxX1uUmUcBFBNjpRo,6127
 odoo/addons/delivery_multi_destination/i18n/de.po,sha256=bRJ-lfE9IkEreP39dPqzEw9HsoIHkP3z9Y9B2VaBHRo,5931
 odoo/addons/delivery_multi_destination/i18n/delivery_multi_destination.pot,sha256=Ha-sFsVUCFGT5yrDycTsuSwyGXKMYea5yKJF8VN2p0s,4577
 odoo/addons/delivery_multi_destination/i18n/es.po,sha256=JzErRGhCErxb8KETG5EqTeXWw344--ZS7kXGOiuvT6I,6168
 odoo/addons/delivery_multi_destination/i18n/fr.po,sha256=QCJkdWeji8FAtxcElmj3VTLyUdo562UjJ7QJZYs33Ms,5822
 odoo/addons/delivery_multi_destination/i18n/it.po,sha256=xk3OQB6PHDdg6YFBZf5Jo9JnhPbDBFLpHq6N6aIHpWE,5820
 odoo/addons/delivery_multi_destination/i18n/nl.po,sha256=vf2--UsklHERIquzUcTl-PX8fmDVqgQ44iNbKfREGN0,5820
 odoo/addons/delivery_multi_destination/i18n/nl_NL.po,sha256=QLgXkjxKYeYMWXAspwTLeqGP6XLZ9LFQdrpcPZClfHo,5829
 odoo/addons/delivery_multi_destination/i18n/pt_BR.po,sha256=bTz2fD4LeGwEtRFzeTRacwbXpqmqg5wiWiUG5ERx2ZY,6185
 odoo/addons/delivery_multi_destination/i18n/sl.po,sha256=7qx0_eus49NqcWa3BZv9fWud1m5xGy16GqXiz22TsYo,5906
 odoo/addons/delivery_multi_destination/i18n/zh_CN.po,sha256=ZLtyWYZUxtZJPUIPhGj3gDmlJHLjtp0ltp9Kv6tE_pE,5839
 odoo/addons/delivery_multi_destination/models/__init__.py,sha256=-K4wh1XVA03SZzTTycr_kcgawLtJanP54sq4kwHL5eA,97
-odoo/addons/delivery_multi_destination/models/delivery_carrier.py,sha256=1i6-ziY95mLLe8LqWkaVngyJtx2OMPFR3m3OBmVSnX8,4207
+odoo/addons/delivery_multi_destination/models/delivery_carrier.py,sha256=Hm3PaOp2RyDJZJx0nyGalDFKC7KrUyV3jrFOsTtgIwU,4964
 odoo/addons/delivery_multi_destination/readme/CONFIGURE.rst,sha256=7ODOGLMD-pk4sqqbXT2EEvsJ-rafrnQz4Xwe3WeD9Xk,386
 odoo/addons/delivery_multi_destination/readme/CONTRIBUTORS.rst,sha256=tmW6kWVF-I2lAuyBHJ6OSY-aECMr75kHM6DN-Q388S8,101
 odoo/addons/delivery_multi_destination/readme/DESCRIPTION.rst,sha256=zGE7V1m8-nd6FcVva5rSgmnD1i8gOQoIP_4aMeHKEGE,383
 odoo/addons/delivery_multi_destination/readme/ROADMAP.rst,sha256=mFUYDdJtYvVAOcxbnU3uIEAb5pCfyvKC-FoOFbx_9ko,129
 odoo/addons/delivery_multi_destination/readme/USAGE.rst,sha256=1L4dwqAZ4L8oNQMO90fp64D4_IVf1AEpBGpun6HNFDo,153
 odoo/addons/delivery_multi_destination/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/delivery_multi_destination/static/description/index.html,sha256=N4sWzd4FKRbvm4B1Lk4W_NpYBOLJEvtqo8jFqBiUIfE,13699
 odoo/addons/delivery_multi_destination/tests/__init__.py,sha256=84QCPauC2-TkXZsq1euuy3oNLYJpiocgsAVkUqpUsLI,112
-odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py,sha256=pYlE27v5SCnj9nj5Ybr1Ufs_3-fyEJOdAgpBTsynXHI,8057
+odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py,sha256=icHQX2FCsXHaHVz493XANo2lqwvavIwYnCf7s5tHGoE,8521
 odoo/addons/delivery_multi_destination/views/delivery_carrier_view.xml,sha256=nO5rd-XqDPzMBvH_nXC_wLfbYnLuZRG9gTMHCWgUhvc,4578
-odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/METADATA,sha256=4KdsXA5NN_3n8ujBEy1cwYVdMIMqSq3HcObMeZNjGy0,4536
-odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo13_addon_delivery_multi_destination-13.0.1.1.1.dev1.dist-info/RECORD,,
+odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/METADATA,sha256=hjBwlHYWFpfceZIhnRR80kj0E1yG6TyR_hFIHHQRMHc,4531
+odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo13_addon_delivery_multi_destination-13.0.1.1.2.dist-info/RECORD,,
```

