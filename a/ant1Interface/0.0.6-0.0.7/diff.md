# Comparing `tmp/ant1Interface-0.0.6-py3-none-any.whl.zip` & `tmp/ant1Interface-0.0.7-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,34 +1,34 @@
-Zip file size: 223023 bytes, number of entries: 62
--r-xr-xr-x  2.0 unx    32452 b- defN 23-Apr-25 15:48 __init__.py
--r-xr-xr-x  2.0 unx      360 b- defN 23-Apr-25 15:48 ant1/ant1Interface_env.sh
+Zip file size: 223209 bytes, number of entries: 62
+-r-xr-xr-x  2.0 unx    32452 b- defN 23-May-10 19:10 __init__.py
+-r-xr-xr-x  2.0 unx      360 b- defN 23-May-10 19:10 ant1/ant1Interface_env.sh
 -rw-r--r--  2.0 unx     5146 b- defN 23-Mar-21 10:40 ant1/catch_all.py
--rw-r--r--  2.0 unx    13038 b- defN 23-Apr-04 19:18 ant1/decoder.py
+-rw-r--r--  2.0 unx    13674 b- defN 23-May-10 17:42 ant1/decoder.py
 -rw-r--r--  2.0 unx      722 b- defN 22-Dec-19 14:12 ant1/demo.py
 -rw-r--r--  2.0 unx     3680 b- defN 23-Mar-01 16:18 ant1/dst.py
 -rw-r--r--  2.0 unx     3060 b- defN 23-Mar-27 15:21 ant1/query_handler.py
 -rw-r--r--  2.0 unx        0 b- defN 22-Dec-09 15:43 ant1/ranker.py
--rw-r--r--  2.0 unx    17172 b- defN 23-Apr-25 15:40 ant1/util.py
--r-xr-xr-x  2.0 unx   155690 b- defN 23-Apr-25 15:48 bot/interface/interface_pb2.py
--r-xr-xr-x  2.0 unx   122753 b- defN 23-Apr-25 15:48 bot/interface/model_context_pb2.py
--r-xr-xr-x  2.0 unx   101780 b- defN 23-Apr-25 15:48 bot/interface/slot_pb2.py
--r-xr-xr-x  2.0 unx    17321 b- defN 23-Apr-25 15:48 bot/interface/user_pb2.py
+-rw-r--r--  2.0 unx    17867 b- defN 23-May-10 18:03 ant1/util.py
+-r-xr-xr-x  2.0 unx   155690 b- defN 23-May-10 19:10 bot/interface/interface_pb2.py
+-r-xr-xr-x  2.0 unx   122753 b- defN 23-May-10 19:10 bot/interface/model_context_pb2.py
+-r-xr-xr-x  2.0 unx   101780 b- defN 23-May-10 19:10 bot/interface/slot_pb2.py
+-r-xr-xr-x  2.0 unx    17321 b- defN 23-May-10 19:10 bot/interface/user_pb2.py
 -rw-r--r--  2.0 unx      150 b- defN 20-Jun-03 04:17 python/google/__init__.py
 -rw-r--r--  2.0 unx     1891 b- defN 20-Jun-03 04:17 python/google/protobuf/__init__.py
--r-xr-xr-x  2.0 unx     2728 b- defN 23-Apr-25 15:48 python/google/protobuf/any_pb2.py
--r-xr-xr-x  2.0 unx    11836 b- defN 23-Apr-25 15:48 python/google/protobuf/api_pb2.py
+-r-xr-xr-x  2.0 unx     2728 b- defN 23-May-10 19:10 python/google/protobuf/any_pb2.py
+-r-xr-xr-x  2.0 unx    11836 b- defN 23-May-10 19:10 python/google/protobuf/api_pb2.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Jun-03 04:17 python/google/protobuf/compiler/__init__.py
--r-xr-xr-x  2.0 unx    13096 b- defN 23-Apr-25 15:48 python/google/protobuf/compiler/plugin_pb2.py
+-r-xr-xr-x  2.0 unx    13096 b- defN 23-May-10 19:10 python/google/protobuf/compiler/plugin_pb2.py
 -rw-r--r--  2.0 unx    44328 b- defN 20-Jun-03 04:17 python/google/protobuf/descriptor.py
 -rw-r--r--  2.0 unx     6820 b- defN 20-Jun-03 04:17 python/google/protobuf/descriptor_database.py
--r-xr-xr-x  2.0 unx   101533 b- defN 23-Apr-25 15:48 python/google/protobuf/descriptor_pb2.py
+-r-xr-xr-x  2.0 unx   101533 b- defN 23-May-10 19:10 python/google/protobuf/descriptor_pb2.py
 -rw-r--r--  2.0 unx    46541 b- defN 20-Jun-03 04:17 python/google/protobuf/descriptor_pool.py
--r-xr-xr-x  2.0 unx     2828 b- defN 23-Apr-25 15:48 python/google/protobuf/duration_pb2.py
--r-xr-xr-x  2.0 unx     1885 b- defN 23-Apr-25 15:48 python/google/protobuf/empty_pb2.py
--r-xr-xr-x  2.0 unx     2437 b- defN 23-Apr-25 15:48 python/google/protobuf/field_mask_pb2.py
+-r-xr-xr-x  2.0 unx     2828 b- defN 23-May-10 19:10 python/google/protobuf/duration_pb2.py
+-r-xr-xr-x  2.0 unx     1885 b- defN 23-May-10 19:10 python/google/protobuf/empty_pb2.py
+-r-xr-xr-x  2.0 unx     2437 b- defN 23-May-10 19:10 python/google/protobuf/field_mask_pb2.py
 -rw-r--r--  2.0 unx     1631 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/__init__.py
 -rwxr-xr--  2.0 unx    15500 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/_parameterized.py
 -rw-r--r--  2.0 unx     6495 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/api_implementation.py
 -rw-r--r--  2.0 unx    25334 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/containers.py
 -rw-r--r--  2.0 unx    38117 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/decoder.py
 -rw-r--r--  2.0 unx    28587 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/encoder.py
 -rw-r--r--  2.0 unx     4040 b- defN 20-Jun-03 04:17 python/google/protobuf/internal/enum_type_wrapper.py
@@ -45,20 +45,20 @@
 -rw-r--r--  2.0 unx     6653 b- defN 20-Jun-03 04:17 python/google/protobuf/message_factory.py
 -rw-r--r--  2.0 unx     5202 b- defN 20-Jun-03 04:17 python/google/protobuf/proto_builder.py
 -rw-r--r--  2.0 unx      150 b- defN 20-Jun-03 04:17 python/google/protobuf/pyext/__init__.py
 -rw-r--r--  2.0 unx     2851 b- defN 20-Jun-03 04:17 python/google/protobuf/pyext/cpp_message.py
 -rw-r--r--  2.0 unx     3779 b- defN 20-Jun-03 04:17 python/google/protobuf/reflection.py
 -rw-r--r--  2.0 unx     9146 b- defN 20-Jun-03 04:17 python/google/protobuf/service.py
 -rw-r--r--  2.0 unx    11592 b- defN 20-Jun-03 04:17 python/google/protobuf/service_reflection.py
--r-xr-xr-x  2.0 unx     2525 b- defN 23-Apr-25 15:48 python/google/protobuf/source_context_pb2.py
--r-xr-xr-x  2.0 unx    11580 b- defN 23-Apr-25 15:48 python/google/protobuf/struct_pb2.py
+-r-xr-xr-x  2.0 unx     2525 b- defN 23-May-10 19:10 python/google/protobuf/source_context_pb2.py
+-r-xr-xr-x  2.0 unx    11580 b- defN 23-May-10 19:10 python/google/protobuf/struct_pb2.py
 -rw-r--r--  2.0 unx     6944 b- defN 20-Jun-03 04:17 python/google/protobuf/symbol_database.py
 -rw-r--r--  2.0 unx     4855 b- defN 20-Jun-03 04:17 python/google/protobuf/text_encoding.py
 -rw-r--r--  2.0 unx    61049 b- defN 20-Jun-03 04:17 python/google/protobuf/text_format.py
--r-xr-xr-x  2.0 unx     2848 b- defN 23-Apr-25 15:48 python/google/protobuf/timestamp_pb2.py
--r-xr-xr-x  2.0 unx    25207 b- defN 23-Apr-25 15:48 python/google/protobuf/type_pb2.py
+-r-xr-xr-x  2.0 unx     2848 b- defN 23-May-10 19:10 python/google/protobuf/timestamp_pb2.py
+-r-xr-xr-x  2.0 unx    25207 b- defN 23-May-10 19:10 python/google/protobuf/type_pb2.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Jun-03 04:17 python/google/protobuf/util/__init__.py
--r-xr-xr-x  2.0 unx    12436 b- defN 23-Apr-25 15:48 python/google/protobuf/wrappers_pb2.py
-?rw-------  2.0 unx       91 b- defN 23-Apr-25 15:48 ant1Interface-0.0.6.dist-info/WHEEL
-?rw-------  2.0 unx     1018 b- defN 23-Apr-25 15:48 ant1Interface-0.0.6.dist-info/METADATA
-?rw-------  2.0 unx     5771 b- defN 23-Apr-25 15:48 ant1Interface-0.0.6.dist-info/RECORD
-62 files, 1178917 bytes uncompressed, 213737 bytes compressed:  81.9%
+-r-xr-xr-x  2.0 unx    12436 b- defN 23-May-10 19:10 python/google/protobuf/wrappers_pb2.py
+?rw-------  2.0 unx       91 b- defN 23-May-10 19:10 ant1Interface-0.0.7.dist-info/WHEEL
+?rw-------  2.0 unx     1018 b- defN 23-May-10 19:10 ant1Interface-0.0.7.dist-info/METADATA
+?rw-------  2.0 unx     5771 b- defN 23-May-10 19:10 ant1Interface-0.0.7.dist-info/RECORD
+62 files, 1180248 bytes uncompressed, 213923 bytes compressed:  81.9%
```

## zipnote {}

```diff
@@ -171,17 +171,17 @@
 
 Filename: python/google/protobuf/util/__init__.py
 Comment: 
 
 Filename: python/google/protobuf/wrappers_pb2.py
 Comment: 
 
-Filename: ant1Interface-0.0.6.dist-info/WHEEL
+Filename: ant1Interface-0.0.7.dist-info/WHEEL
 Comment: 
 
-Filename: ant1Interface-0.0.6.dist-info/METADATA
+Filename: ant1Interface-0.0.7.dist-info/METADATA
 Comment: 
 
-Filename: ant1Interface-0.0.6.dist-info/RECORD
+Filename: ant1Interface-0.0.7.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ant1/ant1Interface_env.sh

```diff
@@ -1,4 +1,4 @@
 # This script should be sourced by the shell with the pythonenvironment where the adabrain wheel package is installed.
 
 ADABRAIN_INSTALL_PATH="$(python -m pip show ant1Interface | grep ^Location: | cut -d ' ' -f 2)"
-export PYTHONPATH=${ADABRAIN_INSTALL_PATH}/:${ADABRAIN_INSTALL_PATH}/python:${ADABRAIN_INSTALL_PATH}/adabrain/common/interface/ant1:$PYTHONPATH
+export PYTHONPATH=${ADABRAIN_INSTALL_PATH}/:${ADABRAIN_INSTALL_PATH}/adabrain/common/interface/ant1:${ADABRAIN_INSTALL_PATH}/python:$PYTHONPATH
```

## ant1/decoder.py

```diff
@@ -145,14 +145,27 @@
             else:
                 knowledge_dict = ModelContextParser.get_knowledge(self._input_proto)   
         except Exception as e:
             print(e)
             self.logger.exception(f"fail to get knowledge from {self._input_proto}")
         return knowledge_dict
     
+    def request_domain_result(self, input_json:str, component_id):
+        if self._input_proto is None:
+            self._parse_input(input_json)
+        try:
+            if self._input_proto_type == RemoteDecoderInput:
+                raise ValueError("Can not support get domain result with remote decoder")
+            else:
+                domain_id, domain_confidence = ModelContextParser.get_domain_result(self._input_proto, component_id)
+        except Exception as e:
+            print(e)
+            self.logger.exception(f"fail to get domain result from {self._input_proto}")
+        return domain_id, domain_confidence
+    
     def set_entities(self, entities: List[Dict]):
         for ent in entities:
             self.set_entity(ent)
         
     def set_entity(self, entity: Dict):
         """
         Args:
```

## ant1/util.py

```diff
@@ -303,14 +303,31 @@
                 slot_dict["params"] = dict(slot_classifier_config.params)
                 expected_slots[slot_id] = slot_dict
         except Exception as e:
             print(e)
         return expected_slots
     
     @classmethod
+    def get_domain_result(cls, input_proto: ModelServiceInput, component_id: str):
+        try:
+            domain_id = ""
+            domain_confidence = 0
+            hyps = input_proto.model_context.user_input.decoder_result.hyps
+            for hyp in hyps:
+                if hyp.intent_component_id == component_id:
+                    domain_id = hyp.domain_id
+                    domain_confidence = hyp.domain_confidence
+        except Exception as e:
+            print(e)
+            logger.exception(f"fail to extract domain result from {input_proto}")
+            domain_id = ""
+            domain_confidence = 0
+        return domain_id, domain_confidence
+        
+    @classmethod
     def set_entity(cls, entity: Dict, output_proto: ModelServiceOutput):
         try:
             entity_proto = ProtoWrapper.wrap_named_entity(entity)
             output_proto.model_context.decoder_result.entities.entity.append(entity_proto)
         except Exception as e:
             print(e)
             logger.exception(f"fail to insert {entity} into {output_proto}")
```

## Comparing `ant1Interface-0.0.6.dist-info/METADATA` & `ant1Interface-0.0.7.dist-info/METADATA`

 * *Files 18% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 Metadata-Version: 2.1
 Name: ant1Interface
-Version: 0.0.6
+Version: 0.0.7
 Author: wangyongqing.wyq
 Author-email: wangyongqing.wyq@antgroup.com
 Home-page: https://code.alipay.com/ai-dls/antnlp/blob/master/adabrain/common/interface/ant1/README.md
 License: Copyright 2022 Ant Group Co., Ltd.
-Build-Tag: 39bc5a4e774265c550e3be0faa01790d8065f5b8
+Build-Tag: 43d08d41782ab685768bba81984205459fbeca98
 
 前言：
 这个代码库主要是用来实现引擎调用算法模型时，输入输出接口的解析。bot中相应的接口定义详见https://yuque.antfin.com/crtpg4/dp5u2i/ciww6f#qNMmC
 
 两种import方式：
 1. 如果使用antnlp，参考antnlp/adabrain/common/interface/ant1/demo.py
 2. 如果不使用antnlp, 直接安装pypi包，pip install -i https://test.pypi.org/simple/ ant1
```

## Comparing `ant1Interface-0.0.6.dist-info/RECORD` & `ant1Interface-0.0.7.dist-info/RECORD`

 * *Files 3% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 __init__.py,sha256=h9jch2pS86y4R36pKRS3LOYUCVFNIJMRwjZ4fJDtJ44,32452
-ant1/ant1Interface_env.sh,sha256=uQi2CkQsDk_2F9DLeY6qG7yxWjG8AF6k-1pCGweOrDs,360
+ant1/ant1Interface_env.sh,sha256=z3wgj480hz1DL-A681HKUGC8wIHsueTWN4yMBLHjzTM,360
 ant1/catch_all.py,sha256=UQU37vYjtPtw07irDQgyW8lzUMJ-s9c7H5X__ClLh6U,5146
-ant1/decoder.py,sha256=1bhyhJUs3tKh0aUr_zo_Zm3J38-v-aPNZD9emITsix4,13038
+ant1/decoder.py,sha256=TrNEgSTk72ORO4dbhCS4rAxiHWg5WFTf3-McMLKtTlM,13674
 ant1/demo.py,sha256=7EKHWgl3qoqsm1e1jmLppQxUr66noDpD1PQXEzAm2uQ,722
 ant1/dst.py,sha256=E31JsW4qye3DD_QPrZziHOAF9Wvhi8XNvGZk-EfCVIk,3680
 ant1/query_handler.py,sha256=zwUxjRYYCSI7WxovllovBLUYExPQD0Gm4e-ABUJhp-M,3060
 ant1/ranker.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-ant1/util.py,sha256=vJ1YfcwVNNnTM8nCflQ7Fk2mmMbElQ3e3qwlYixM7GI,17172
-ant1Interface-0.0.6.dist-info/METADATA,sha256=DAGjDN65prcpPjceeb-lvO1MaIX4mlMijwlN2IXxW8E,1018
-ant1Interface-0.0.6.dist-info/RECORD,,
-ant1Interface-0.0.6.dist-info/WHEEL,sha256=sobxWSyDDkdg_rinUth-jxhXHqoNqlmNMJY3aTZn2Us,91
+ant1/util.py,sha256=1a7AK-uUF5gJRTyK8X8Un8b4k12mVY21VwX5DtmOXzE,17867
+ant1Interface-0.0.7.dist-info/METADATA,sha256=2z9AnSat3ThFIIJ2r-SWFurNxDj6ntvJJkHwRiDCn_0,1018
+ant1Interface-0.0.7.dist-info/RECORD,,
+ant1Interface-0.0.7.dist-info/WHEEL,sha256=sobxWSyDDkdg_rinUth-jxhXHqoNqlmNMJY3aTZn2Us,91
 bot/interface/interface_pb2.py,sha256=0JGPROdtiSaqiDWQh4e5-HTneV1vCsARinRi2HYUsHk,155690
 bot/interface/model_context_pb2.py,sha256=LrVqARIMdXhv8rRzdAikkhMotfV7UJz_bKUfX-riClM,122753
 bot/interface/slot_pb2.py,sha256=edCH9E8YRi8m4BCl9_OB1DFwwYyQjG1GZGE55YuUB3A,101780
 bot/interface/user_pb2.py,sha256=Dnv3VyJb8oNGcLB2P_Wc_kiIc5QEp54Yl5D6CLD1VwY,17321
 python/google/__init__.py,sha256=8SXBh8YGxPXGDmFtR_n90wt5xWvc5CEp_L5Pn687VaU,150
 python/google/protobuf/__init__.py,sha256=JSAhUB5Xqs01GlvK1UfieMS0VhV-hv0ma-tCMyzX_ls,1891
 python/google/protobuf/any_pb2.py,sha256=wisu94JIzDISMelDvN8PtV0XQ91Y1QI877tAAIJ-8Hg,2728
```

